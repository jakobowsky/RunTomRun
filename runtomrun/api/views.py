import requests
from pprint import pprint

from django.shortcuts import render
from django.http import JsonResponse

from routing.routing import check
from runtomrun.settings import TOMTOMKEY


def get_points():
    return [52.41754683054461,	16.951063,
            52.417288277212116,	16.955490003391393,
            52.41652197082172,	16.95975685266667,
            52.41527563286609,	16.963709203708504,
            52.41359434718416,	16.96720411930459,
            52.41153892507233,	16.97011524801762,
            52.40918370091736,	16.972337396013845,
            52.40661383895354,	16.97379032587696,
            52.40392224943229,	16.974421645568448,
            52.401206226488895,	16.974208684708408,
            52.39856392981106,	16.97315929284883,
            52.39609083753682,	16.971311533913163,
            52.39387629848895,	16.968732290976018,
            52.392000307916895,	16.96551483459676,
            52.39053062255633,	16.961775444640203,
            52.38952031837444,	16.957649208695152,
            52.38900587831884,	16.95328514878758,
            52.38900587831884,	16.948840851212424,
            52.38952031837442,	16.944476791304847,
            52.39053062255633,	16.9403505553598,
            52.392000307916895,	16.936611165403242,
            52.39387629848895,	16.933393709023985,
            52.39609083753682,	16.93081446608684,
            52.398563929811054,	16.928966707151172,
            52.401206226488895,	16.927917315291594,
            52.40392224943229,	16.927704354431555,
            52.40661383895353,	16.928335674123044,
            52.40918370091736,	16.929788603986164,
            52.41153892507233,	16.932010751982382,
            52.41359434718416,	16.934921880695406,
            52.4152756328661,	16.938416796291502,
            52.41652197082172,	16.942369147333338,
            52.41728827721212,	16.94663599660861,
            ]


def get_tomtom():
    request = requests.get(
        f'https://api.tomtom.com/routing/1/calculateRoute/52.50931,13.42936:52.50274,13.43872/json?avoid=unpavedRoads&key={TOMTOMKEY}'
    )
    pprint(request.json())


def index(request, x, y, radius, length):
    #print(get_points())
    #print(TOMTOMKEY)
    get_tomtom()
    json_response = {
        'routing': f'{check(2)}',
        'x': x,
        'y': y,
        'radius': radius,
        'length': length,
    }
    return JsonResponse(json_response)
